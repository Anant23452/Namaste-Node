<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF.js Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    #pdf-render {
      border: 1px solid #ccc;
      width: 100%;
      height: calc(100vh - 40px);
    }
    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: #f0f0f0;
    }
    button {
      padding: 5px 10px;
      font-size: 16px;
    }
    input[type="number"] {
      width: 50px;
      font-size: 16px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="controls">
    <button id="prev-page">Previous</button>
    <span>Page: <input type="number" id="page-num" value="1" min="1" readonly> / <span id="page-count"></span></span>
    <button id="next-page">Next</button>
  </div>
  <canvas id="pdf-render"></canvas>
  <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
  <script>
    // URL of the PDF file
const pdfUrl = "The Ultimate C Handbook.pdf";

// Initialize PDF.js
const pdfjsLib = window["pdfjs-dist/build/pdf"];
pdfjsLib.GlobalWorkerOptions.workerSrc = "https://mozilla.github.io/pdf.js/build/pdf.worker.js";

let pdfDoc = null,
  pageNum = 1,
  pageRendering = false,
  pageNumPending = null;

const canvas = document.getElementById("pdf-render");
const ctx = canvas.getContext("2d");

// Load the PDF
pdfjsLib.getDocument(pdfUrl).promise.then((doc) => {
  pdfDoc = doc;
  document.getElementById("page-count").textContent = pdfDoc.numPages;
  renderPage(pageNum);
});

// Render a specific page
function renderPage(num) {
  pageRendering = true;

  pdfDoc.getPage(num).then((page) => {
    const viewport = page.getViewport({ scale: 1.5 });
    canvas.height = viewport.height;
    canvas.width = viewport.width;

    const renderContext = {
      canvasContext: ctx,
      viewport: viewport,
    };

    const renderTask = page.render(renderContext);
    renderTask.promise.then(() => {
      pageRendering = false;
      if (pageNumPending !== null) {
        renderPage(pageNumPending);
        pageNumPending = null;
      }
    });
  });

  document.getElementById("page-num").value = num;
}

// Handle previous/next buttons
document.getElementById("prev-page").addEventListener("click", () => {
  if (pageNum <= 1) return;
  pageNum--;
  queueRenderPage(pageNum);
});

document.getElementById("next-page").addEventListener("click", () => {
  if (pageNum >= pdfDoc.numPages) return;
  pageNum++;
  queueRenderPage(pageNum);
});

function queueRenderPage(num) {
  if (pageRendering) {
    pageNumPending = num;
  } else {
    renderPage(num);
  }
}

  </script>
</body>
</html>
